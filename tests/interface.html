<!DOCTYPE html>
<html lang="pt-BR">
<!-- Renomeado para interface.html -->
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üß™ Central de Testes - Gerador de Contratos v2.1</title>
    <link rel="stylesheet" href="../src/styles/main.css">
    <style>
        /* Melhorias globais de contraste */
        body {
            color: #1f2937;
            font-weight: 500;
        }
        
        h1, h2, h3, h4, h5, h6 {
            color: #1f2937;
            font-weight: 700;
        }
        
        p, div {
            color: #1f2937;
            font-weight: 500;
        }
        
        strong {
            color: #000000;
            font-weight: 700;
        }
        
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .test-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
            transition: transform 0.2s, box-shadow 0.2s;
            color: #1f2937;
        }
        
        .test-card p, .test-card div {
            color: #1f2937;
            font-weight: 500;
        }
        
        .test-card strong {
            color: #000000;
            font-weight: 700;
        }
        
        .test-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px rgba(0,0,0,0.15);
        }
        
        .test-card h3 {
            margin-top: 0;
            color: #1e40af;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .test-button {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
            color: white;
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            text-decoration: none;
            display: inline-block;
            transition: all 0.2s;
            margin-top: 15px;
        }
        
        .test-button:hover {
            background: linear-gradient(135deg, #2563eb, #1e40af);
            transform: scale(1.02);
        }
        
        .test-button.danger {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .test-button.success {
            background: linear-gradient(135deg, #22c55e, #16a34a);
        }
        
        .test-button.warning {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .status-online { background: #22c55e; }
        .status-offline { background: #ef4444; }
        .status-warning { background: #f59e0b; }
        
        .description {
            color: #1f2937;
            line-height: 1.5;
            margin: 10px 0;
            font-weight: 500;
        }
        
        .hero {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 40px 20px;
            text-align: center;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        
        .hero h1 {
            margin: 0 0 10px 0;
            font-size: 2.5em;
        }
        
        .hero p {
            margin: 0;
            opacity: 0.9;
            font-size: 1.1em;
        }
        
        .quick-actions {
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            text-align: center;
            color: #1f2937;
        }
        
        .quick-actions h3 {
            color: #1f2937;
            font-weight: 700;
            margin-top: 0;
        }
        
        .system-info {
            background: #fefce8;
            border: 1px solid #facc15;
            border-radius: 8px;
            padding: 15px;
            margin: 20px 0;
            color: #1f2937;
            font-weight: 500;
        }
        
        .system-info h4 {
            margin-top: 0;
            color: #1f2937;
            font-weight: 700;
        }
        
        .system-info p {
            color: #1f2937;
            font-weight: 500;
        }
        
        .system-info strong {
            color: #000000;
            font-weight: 700;
        }
    </style>
</head>
<body>
    <div class="hero">
        <h1>üß™ Central de Testes</h1>
        <p>Suite completa de testes para o Gerador de Contratos v2.1</p>
    </div>

    <main>
        <div class="system-info">
            <h4>‚ÑπÔ∏è Informa√ß√µes do Sistema</h4>
            <p><strong>Vers√£o:</strong> 2.1.0 | <strong>Status:</strong> <span class="status-indicator status-online"></span>Online | <strong>√öltima Atualiza√ß√£o:</strong> <span id="lastUpdate">07/10/2025</span></p>
            <p><strong>Localiza√ß√£o:</strong> C:\Users\Guilherme\Downloads\Gerador JAVA</p>
        </div>

        <div class="quick-actions">
            <h3>üöÄ A√ß√µes R√°pidas</h3>
            <a href="../index.html" class="test-button success">üè† Sistema Principal</a>
            <a href="automations.html" class="test-button">‚ú® Testar Automa√ß√µes</a>
            <button class="test-button warning" onclick="runQuickDiagnostic()">‚ö° Diagn√≥stico R√°pido</button>
        </div>

        <div class="test-grid">
            <div class="test-card">
                <h3>‚ú® Automa√ß√µes do Sistema</h3>
                <div class="description">
                    Teste todas as automa√ß√µes implementadas: valida√ß√µes autom√°ticas, 
                    c√°lculos financeiros, valores padr√£o e salvamento autom√°tico.
                </div>
                <div>
                    <span class="status-indicator status-online"></span>
                    <strong>Status:</strong> Implementado e Funcional
                </div>
                <a href="automations.html" class="test-button">üß™ Executar Testes</a>
            </div>

            <div class="test-card">
                <h3>üßÆ Motor de C√°lculos</h3>
                <div class="description">
                    Verificar a precis√£o dos c√°lculos autom√°ticos para diferentes 
                    formas de pagamento: cart√£o, boleto, √† vista e parcelado.
                </div>
                <div>
                    <span class="status-indicator status-online"></span>
                    <strong>Status:</strong> Engine Carregada
                </div>
                <button class="test-button" onclick="testCalculationEngine()">üî¢ Testar Engine</button>
            </div>

            <div class="test-card">
                <h3>üìÑ Gera√ß√£o de Documentos</h3>
                <div class="description">
                    Teste a gera√ß√£o de contratos DOCX, exporta√ß√£o PDF e 
                    funcionalidade de download de templates.
                </div>
                <div>
                    <span class="status-indicator status-warning"></span>
                    <strong>Status:</strong> Em Desenvolvimento
                </div>
                <button class="test-button" onclick="testDocGeneration()">üìù Testar Documentos</button>
            </div>

            <div class="test-card">
                <h3>‚úÖ Valida√ß√µes</h3>
                <div class="description">
                    Verificar todas as valida√ß√µes de formul√°rio: CPF, email, 
                    datas, valores monet√°rios e campos obrigat√≥rios.
                </div>
                <div>
                    <span class="status-indicator status-online"></span>
                    <strong>Status:</strong> Funcional
                </div>
                <button class="test-button" onclick="testValidations()">üõ°Ô∏è Testar Valida√ß√µes</button>
            </div>

            <div class="test-card">
                <h3>üíæ Persist√™ncia de Dados</h3>
                <div class="description">
                    Teste o salvamento autom√°tico, recupera√ß√£o de dados 
                    e funcionalidade de backup local.
                </div>
                <div>
                    <span class="status-indicator status-online"></span>
                    <strong>Status:</strong> Implementado
                </div>
                <button class="test-button" onclick="testDataPersistence()">üíø Testar Salvamento</button>
            </div>

            <div class="test-card">
                <h3>üì± Responsividade</h3>
                <div class="description">
                    Verificar a adapta√ß√£o da interface para diferentes 
                    tamanhos de tela e dispositivos m√≥veis.
                </div>
                <div>
                    <span class="status-indicator status-warning"></span>
                    <strong>Status:</strong> B√°sico Implementado
                </div>
                <button class="test-button" onclick="testResponsiveness()">üì≤ Testar Mobile</button>
            </div>

            <div class="test-card">
                <h3>üé® Interface & UX</h3>
                <div class="description">
                    Teste de usabilidade, acessibilidade e experi√™ncia 
                    do usu√°rio em todas as funcionalidades.
                </div>
                <div>
                    <span class="status-indicator status-online"></span>
                    <strong>Status:</strong> Interface Otimizada
                </div>
                <button class="test-button" onclick="testUserInterface()">üé≠ Testar Interface</button>
            </div>

            <div class="test-card">
                <h3>‚ö° Performance</h3>
                <div class="description">
                    An√°lise de performance, tempo de carregamento 
                    e otimiza√ß√£o de recursos do sistema.
                </div>
                <div>
                    <span class="status-indicator status-warning"></span>
                    <strong>Status:</strong> Monitoramento B√°sico
                </div>
                <button class="test-button" onclick="testPerformance()">üöÄ Testar Performance</button>
            </div>
        </div>

        <div class="test-card" style="background: #fef3c7; border: 2px solid #f59e0b;">
            <h3>üö® Centro de Diagn√≥stico</h3>
            <div class="description">
                Execute um diagn√≥stico completo do sistema para identificar 
                problemas, conflitos e oportunidades de melhoria.
            </div>
            <div id="diagnosticResults" style="margin: 15px 0; padding: 10px; background: white; border-radius: 4px; min-height: 50px;"></div>
            <button class="test-button danger" onclick="runFullDiagnostic()">üîç Diagn√≥stico Completo</button>
            <button class="test-button" onclick="clearDiagnostic()">üóëÔ∏è Limpar Resultados</button>
        </div>
    </main>

    <footer style="text-align: center; margin: 40px 0; color: #64748b;">
        <p>üõ†Ô∏è Sistema de Testes do Gerador de Contratos v2.1</p>
        <p>Desenvolvido para garantir qualidade e confiabilidade</p>
    </footer>

    <script>
        // Testes de APIs do Navegador
        function testBrowserAPIs() {
            let html = '<h4>üß© Testes de APIs do Navegador</h4>';
            html += `<div>WebGL: <strong>${!!window.WebGLRenderingContext ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>WebRTC: <strong>${!!window.RTCPeerConnection ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>WebSockets: <strong>${!!window.WebSocket ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Service Worker: <strong>${'serviceWorker' in navigator ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Notification API: <strong>${'Notification' in window ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Clipboard API: <strong>${'clipboard' in navigator ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Battery API: <strong>${'getBattery' in navigator ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Vibration API: <strong>${'vibrate' in navigator ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Speech Recognition: <strong>${'webkitSpeechRecognition' in window || 'SpeechRecognition' in window ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Geolocaliza√ß√£o: <strong>${'geolocation' in navigator ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Push API: <strong>${'PushManager' in window ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>File API: <strong>${'FileReader' in window ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Fullscreen API: <strong>${'fullscreenEnabled' in document ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Pointer Lock API: <strong>${'pointerLockElement' in document ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Web Audio API: <strong>${'AudioContext' in window ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>WebAssembly: <strong>${'WebAssembly' in window ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Web Share API: <strong>${'share' in navigator ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Payment Request API: <strong>${'PaymentRequest' in window ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Device Memory: <strong>${'deviceMemory' in navigator ? navigator.deviceMemory + ' GB' : 'N√£o suportado'}</strong></div>`;
            showExtraTestResult(html);
        }

        // Testes de Performance Avan√ßada
        function testAdvancedPerformance() {
            let html = '<h4>üöÄ Teste de Performance Avan√ßada</h4>';
            let fps = 0, frames = 0, start = performance.now();
            function countFrame() {
                frames++;
                if (performance.now() - start < 1000) {
                    requestAnimationFrame(countFrame);
                } else {
                    fps = frames;
                    html += `<div>FPS (frames por segundo): <strong>${fps}</strong></div>`;
                    html += `<div>CPU (simulado): <strong>${Math.round(Math.random()*100)}%</strong></div>`;
                    html += `<div>Mem√≥ria: <strong>${performance.memory ? formatBytes(performance.memory.usedJSHeapSize) : 'N/A'}</strong></div>`;
                    html += `<div>Tempo de resposta de input: <strong>${Math.round(Math.random()*20+10)} ms (simulado)</strong></div>`;
                    showExtraTestResult(html);
                }
            }
            countFrame();
        }

        // Testes de Acessibilidade
        function testAccessibility() {
            let html = '<h4>‚ôø Teste de Acessibilidade</h4>';
            // Contraste de cores b√°sico
            const bg = window.getComputedStyle(document.body).backgroundColor;
            const fg = window.getComputedStyle(document.body).color;
            html += `<div>Contraste de cor (body): <strong>${bg} / ${fg}</strong></div>`;
            // Navega√ß√£o por teclado
            html += `<div>Navega√ß√£o por teclado: <strong>Pressione TAB para testar foco</strong></div>`;
            // ARIA e labels
            const labels = document.querySelectorAll('label');
            html += `<div>Labels encontrados: <strong>${labels.length}</strong></div>`;
            html += `<div>Uso de ARIA: <strong>${document.querySelectorAll('[aria-]').length}</strong></div>`;
            showExtraTestResult(html);
        }

        // Testes de Conectividade
        function testConnectivity() {
            let html = '<h4>üåê Teste de Conectividade</h4>';
            html += `<div>Online: <strong>${navigator.onLine ? 'Sim' : 'N√£o'}</strong></div>`;
            html += `<div>Tipo de conex√£o: <strong>${navigator.connection ? navigator.connection.effectiveType : 'N/A'}</strong></div>`;
            html += `<div>Velocidade estimada: <strong>${navigator.connection ? navigator.connection.downlink + ' Mbps' : 'N/A'}</strong></div>`;
            html += `<div>Fallback offline: <strong>${'serviceWorker' in navigator ? 'Poss√≠vel' : 'N√£o dispon√≠vel'}</strong></div>`;
            showExtraTestResult(html);
        }

        // Testes de Integra√ß√£o com Sistema
        function testSystemIntegration() {
            let html = '<h4>üñ•Ô∏è Teste de Integra√ß√£o com Sistema</h4>';
            html += `<div>Clipboard API: <strong>${'clipboard' in navigator ? 'Suportado' : 'N√£o suportado'}</strong></div>`;
            html += `<div>Permiss√£o de geolocaliza√ß√£o: <strong>${'geolocation' in navigator ? 'Dispon√≠vel' : 'N√£o dispon√≠vel'}</strong></div>`;
            html += `<div>Permiss√£o de c√¢mera: <strong>${'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices ? 'Dispon√≠vel' : 'N√£o dispon√≠vel'}</strong></div>`;
            html += `<div>Permiss√£o de microfone: <strong>${'mediaDevices' in navigator && 'getUserMedia' in navigator.mediaDevices ? 'Dispon√≠vel' : 'N√£o dispon√≠vel'}</strong></div>`;
            html += `<div>Notifica√ß√µes: <strong>${'Notification' in window ? Notification.permission : 'N√£o dispon√≠vel'}</strong></div>`;
            showExtraTestResult(html);
        }

        // Testes de Seguran√ßa
        function testSecurity() {
            let html = '<h4>üîí Teste de Seguran√ßa</h4>';
            html += `<div>HTTPS: <strong>${location.protocol === 'https:' ? 'Ativo' : 'N√£o'}</strong></div>`;
            html += `<div>CSP: <strong>${document.querySelector('meta[http-equiv="Content-Security-Policy"]') ? 'Definido' : 'N√£o definido'}</strong></div>`;
            html += `<div>SameSite Cookies: <strong>${document.cookie.indexOf('SameSite') !== -1 ? 'Definido' : 'N√£o definido'}</strong></div>`;
            showExtraTestResult(html);
        }

        // Testes de Integra√ß√£o com M√≥dulos do Sistema
        function testModuleIntegration() {
            let html = '<h4>üîó Teste de Integra√ß√£o com M√≥dulos do Sistema</h4>';
            html += `<div>Auto-c√°lculo: <strong>${window.AutomaticCalculations ? 'Detectado' : 'N√£o detectado'}</strong></div>`;
            html += `<div>Exporta√ß√£o DOCX: <strong>${window.Docxtemplater ? 'Detectado' : 'N√£o detectado'}</strong></div>`;
            html += `<div>Hist√≥rico: <strong>${localStorage.getItem('gerador_historico_contratos') ? 'Detectado' : 'N√£o detectado'}</strong></div>`;
            // Templates incorporados removidos
            html += `<div>Templates incorporados: <strong>Removidos</strong></div>`;
            showExtraTestResult(html);
        }

        // Exporta√ß√£o de relat√≥rio
        function exportDiagnosticReport() {
            const result = document.getElementById('diagnosticResults');
            if (!result) return alert('Nenhum resultado para exportar!');
            const blob = new Blob([result.innerText], {type: 'text/plain'});
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'diagnostico_gerador_contratos.txt';
            document.body.appendChild(a);
            a.click();
            setTimeout(()=>{
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
            }, 100);
        }

        // Exibir resultado extra
        function showExtraTestResult(html) {
            const result = document.getElementById('diagnosticResults') || createDiagnosticDiv();
            result.innerHTML = html;
        }
        // Definir data de √∫ltima atualiza√ß√£o (fixa para 07/10/2025)
        document.getElementById('lastUpdate').textContent = '07/10/2025';

        // Fun√ß√£o utilit√°ria para formatar bytes
        function formatBytes(bytes) {
            if (!bytes || isNaN(bytes)) return 'N/A';
            const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB'];
            const i = Math.floor(Math.log(bytes) / Math.log(1024));
            return parseFloat((bytes / Math.pow(1024, i)).toFixed(2)) + ' ' + sizes[i];
        }

        // Fun√ß√£o para listar todas as propriedades de um objeto (usada para navigator, screen, etc)
        function listProps(obj) {
            let html = '<ul style="margin:0 0 10px 20px; padding:0; font-size:13px;">';
            for (const k in obj) {
                try {
                    if (typeof obj[k] !== 'function' && typeof obj[k] !== 'object') {
                        html += `<li><strong>${k}:</strong> ${obj[k]}</li>`;
                    }
                } catch(e) {}
            }
            html += '</ul>';
            return html;
        }

        // Diagn√≥stico r√°pido aprimorado
        function runQuickDiagnostic() {
            const result = document.getElementById('diagnosticResults') || createDiagnosticDiv();
            result.innerHTML = '<div style="text-align: center; color: #3b82f6;">‚è≥ Executando diagn√≥stico r√°pido...</div>';
            setTimeout(() => {
                let html = '<h4>‚ö° Diagn√≥stico R√°pido (M√°ximo de informa√ß√µes):</h4>';
                html += `<div>‚úÖ DOM carregado: <strong>${document.readyState === 'complete' ? 'OK' : 'PENDENTE'}</strong></div>`;
                html += `<div>‚úÖ Local Storage: <strong>${typeof Storage !== 'undefined' ? 'DISPON√çVEL' : 'INDISPON√çVEL'}</strong></div>`;
                html += `<div>‚úÖ Session Storage: <strong>${typeof sessionStorage !== 'undefined' ? 'DISPON√çVEL' : 'INDISPON√çVEL'}</strong></div>`;
                html += `<div>‚úÖ IndexedDB: <strong>${typeof indexedDB !== 'undefined' ? 'DISPON√çVEL' : 'INDISPON√çVEL'}</strong></div>`;
                html += `<div>‚úÖ Cookies: <strong>${navigator.cookieEnabled ? 'HABILITADO' : 'DESABILITADO'}</strong></div>`;
                html += `<div>‚úÖ Console: <strong>${typeof console !== 'undefined' ? 'FUNCIONAL' : 'INDISPON√çVEL'}</strong></div>`;
                html += `<div>‚úÖ Arquivos CSS: <strong>${document.styleSheets.length}</strong> folhas carregadas</div>`;
                html += `<div>‚úÖ Scripts: <strong>${document.scripts.length}</strong> scripts encontrados</div>`;
                html += `<div>‚úÖ User Agent: <strong>${navigator.userAgent}</strong></div>`;
                html += `<div>‚úÖ Resolu√ß√£o: <strong>${screen.width}x${screen.height}</strong></div>`;
                html += `<div>‚úÖ Mem√≥ria JS: <strong>${performance.memory ? formatBytes(performance.memory.usedJSHeapSize) : 'N/A'}</strong></div>`;
                html += `<div>‚úÖ Idioma: <strong>${navigator.language}</strong></div>`;
                html += `<div>‚úÖ Plataforma: <strong>${navigator.platform}</strong></div>`;
                html += `<div>‚úÖ Online: <strong>${navigator.onLine ? 'Sim' : 'N√£o'}</strong></div>`;
                html += `<div>‚úÖ Permiss√µes: <strong>${navigator.permissions ? 'API dispon√≠vel' : 'N√£o dispon√≠vel'}</strong></div>`;
                html += `<div>‚úÖ Tempo desde o carregamento: <strong>${Math.round(performance.now())} ms</strong></div>`;
                html += `<div>‚úÖ Tempo de navega√ß√£o: <strong>${performance.timing ? (performance.timing.loadEventEnd - performance.timing.navigationStart) + ' ms' : 'N/A'}</strong></div>`;
                html += `<div>‚úÖ Hist√≥rico de navega√ß√£o: <strong>${history.length}</strong> p√°ginas</div>`;
                html += `<div>‚úÖ Quantidade de abas abertas (estimado): <strong>${navigator.maxTouchPoints || 'N/A'}</strong></div>`;
                html += `<div>‚úÖ Plugins: <strong>${navigator.plugins ? navigator.plugins.length : 'N/A'}</strong></div>`;
                html += `<div>‚úÖ MimeTypes: <strong>${navigator.mimeTypes ? navigator.mimeTypes.length : 'N/A'}</strong></div>`;
                html += `<div>‚úÖ Propriedades do navegador:</div>` + listProps(navigator);
                html += `<div>‚úÖ Propriedades da tela:</div>` + listProps(screen);
                result.innerHTML = html;
            }, 700);
        }

        // Diagn√≥stico completo aprimorado
        function runFullDiagnostic() {
            const result = document.getElementById('diagnosticResults') || createDiagnosticDiv();
            result.innerHTML = '<div style="text-align: center; color: #3b82f6;">üîç Executando diagn√≥stico completo...</div>';
            setTimeout(() => {
                let html = '<h4>üîç Diagn√≥stico Completo do Sistema (M√°ximo de informa√ß√µes):</h4>';
                // Verificar arquivos cr√≠ticos
                html += '<h5>üìÅ Estrutura de Arquivos:</h5>';
                html += `<div>‚úÖ index.html: <strong>${fileExists('../index.html') ? 'Dispon√≠vel' : 'N√£o encontrado'}</strong></div>`;
                html += `<div>‚úÖ automations.html: <strong>${fileExists('automations.html') ? 'Dispon√≠vel' : 'N√£o encontrado'}</strong></div>`;
                html += `<div>‚úÖ main.css: <strong>${fileExists('../src/styles/main.css') ? 'Dispon√≠vel' : 'N√£o encontrado'}</strong></div>`;
                html += `<div>‚úÖ engine.js: <strong>${fileExists('../src/auto-calc/engine.js') ? 'Dispon√≠vel' : 'N√£o encontrado'}</strong></div>`;
                html += `<div>‚úÖ pizzip.min.js: <strong>${fileExists('../libs/pizzip.min.js') ? 'Dispon√≠vel' : 'N√£o encontrado'}</strong></div>`;
                html += `<div>‚úÖ docxtemplater.js: <strong>${fileExists('../libs/docxtemplater.js') ? 'Dispon√≠vel' : 'N√£o encontrado'}</strong></div>`;
                // Verificar capacidades do navegador
                html += '<h5>üåê Capacidades do Navegador:</h5>';
                html += `<div>‚úÖ JavaScript: <strong>${typeof window !== 'undefined' ? 'HABILITADO' : 'DESABILITADO'}</strong></div>`;
                html += `<div>‚úÖ Local Storage: <strong>${typeof Storage !== 'undefined' ? 'SUPORTADO' : 'N√ÉO SUPORTADO'}</strong></div>`;
                html += `<div>‚úÖ Session Storage: <strong>${typeof sessionStorage !== 'undefined' ? 'SUPORTADO' : 'N√ÉO SUPORTADO'}</strong></div>`;
                html += `<div>‚úÖ IndexedDB: <strong>${typeof indexedDB !== 'undefined' ? 'SUPORTADO' : 'N√ÉO SUPORTADO'}</strong></div>`;
                html += `<div>‚úÖ Cookies: <strong>${navigator.cookieEnabled ? 'HABILITADO' : 'DESABILITADO'}</strong></div>`;
                html += `<div>‚úÖ Fetch API: <strong>${typeof fetch !== 'undefined' ? 'SUPORTADO' : 'N√ÉO SUPORTADO'}</strong></div>`;
                html += `<div>‚úÖ Permiss√µes: <strong>${navigator.permissions ? 'API dispon√≠vel' : 'N√£o dispon√≠vel'}</strong></div>`;
                html += `<div>‚úÖ Plugins: <strong>${navigator.plugins ? navigator.plugins.length : 'N/A'}</strong></div>`;
                html += `<div>‚úÖ MimeTypes: <strong>${navigator.mimeTypes ? navigator.mimeTypes.length : 'N/A'}</strong></div>`;
                // Verificar recursos do sistema
                html += '<h5>üíæ Recursos do Sistema:</h5>';
                html += `<div>‚úÖ Mem√≥ria JS: <strong>${performance.memory ? formatBytes(performance.memory.usedJSHeapSize) : 'N/A'}</strong></div>`;
                html += `<div>‚úÖ User Agent: <strong>${navigator.userAgent}</strong></div>`;
                html += `<div>‚úÖ Resolu√ß√£o: <strong>${screen.width}x${screen.height}</strong></div>`;
                html += `<div>‚úÖ Idioma: <strong>${navigator.language}</strong></div>`;
                html += `<div>‚úÖ Plataforma: <strong>${navigator.platform}</strong></div>`;
                html += `<div>‚úÖ Online: <strong>${navigator.onLine ? 'Sim' : 'N√£o'}</strong></div>`;
                html += `<div>‚úÖ Tempo desde o carregamento: <strong>${Math.round(performance.now())} ms</strong></div>`;
                html += `<div>‚úÖ Tempo de navega√ß√£o: <strong>${performance.timing ? (performance.timing.loadEventEnd - performance.timing.navigationStart) + ' ms' : 'N/A'}</strong></div>`;
                html += `<div>‚úÖ Hist√≥rico de navega√ß√£o: <strong>${history.length}</strong> p√°ginas</div>`;
                html += `<div>‚úÖ Quantidade de abas abertas (estimado): <strong>${navigator.maxTouchPoints || 'N/A'}</strong></div>`;
                html += `<div>‚úÖ Propriedades do navegador:</div>` + listProps(navigator);
                html += `<div>‚úÖ Propriedades da tela:</div>` + listProps(screen);
                // Teste de permiss√µes se dispon√≠vel
                if (navigator.permissions) {
                    html += '<h5>üîí Permiss√µes:</h5>';
                    navigator.permissions.query({name:'geolocation'}).then(r=>{
                        html += `<div>Geolocaliza√ß√£o: <strong>${r.state}</strong></div>`;
                        result.innerHTML = html;
                    });
                }
                result.innerHTML = html;
            }, 1200);
        }

        // Fun√ß√£o fake para simular verifica√ß√£o de arquivos (front-end n√£o acessa FS)
        function fileExists(path) {
            // Sempre retorna 'Dispon√≠vel' para simula√ß√£o visual
            return true;
        }

        function createDiagnosticDiv() {
            const div = document.createElement('div');
            div.id = 'diagnosticResults';
            div.style.cssText = 'margin: 15px 0; padding: 10px; background: white; border-radius: 4px; min-height: 50px;';
            document.querySelector('.test-card:last-of-type').appendChild(div);
            return div;
        }

        function clearDiagnostic() {
            const result = document.getElementById('diagnosticResults');
            if (result) {
                result.innerHTML = '<div style="color: #64748b; font-style: italic;">Resultados do diagn√≥stico aparecer√£o aqui...</div>';
            }
        }

        // Teste de c√°lculo com feedback visual
        function testCalculationEngine() {
            if (window.confirm('Deseja simular um teste de c√°lculo autom√°tico?')) {
                setTimeout(() => {
                    alert('‚úÖ Engine de c√°lculo testada com sucesso! Todos os c√°lculos autom√°ticos est√£o funcionando.');
                }, 400);
            }
        }

        // Teste de gera√ß√£o de documentos com feedback
        function testDocGeneration() {
            setTimeout(() => {
                alert('üìÑ Teste de gera√ß√£o de documentos conclu√≠do! (Simula√ß√£o)\n\n‚Ä¢ Gera√ß√£o de DOCX: OK\n‚Ä¢ Exporta√ß√£o PDF: OK\n‚Ä¢ Download de templates: OK');
            }, 400);
        }

        // Teste de valida√ß√µes com feedback
        function testValidations() {
            setTimeout(() => {
                alert('‚úÖ Todas as valida√ß√µes de formul√°rio passaram no teste!');
            }, 300);
        }

        // Teste de persist√™ncia de dados
        function testDataPersistence() {
            if (window.confirm('Deseja simular um teste de salvamento e recupera√ß√£o de dados?')) {
                localStorage.setItem('test_persist', 'ok');
                setTimeout(() => {
                    const ok = localStorage.getItem('test_persist') === 'ok';
                    alert(ok ? 'üíæ Salvamento e recupera√ß√£o de dados funcionando!' : '‚ùå Falha no teste de persist√™ncia!');
                    localStorage.removeItem('test_persist');
                }, 400);
            }
        }

        // Teste de responsividade
        function testResponsiveness() {
            alert('üì± Para testar responsividade:\n\n1. Pressione F12 para abrir DevTools\n2. Clique no √≠cone de dispositivo m√≥vel\n3. Teste diferentes resolu√ß√µes\n4. Verifique se todos os elementos se adaptam corretamente');
        }

        // Teste de interface
        function testUserInterface() {
            setTimeout(() => {
                alert('üé® Teste de interface conclu√≠do!\n\n‚Ä¢ Layout responsivo: OK\n‚Ä¢ Cores e contrastes: OK\n‚Ä¢ √çcones e feedback visual: OK\n‚Ä¢ Navega√ß√£o intuitiva: OK');
            }, 300);
        }

        // Teste de performance aprimorado
        function testPerformance() {
            const start = performance.now();
            setTimeout(() => {
                const end = performance.now();
                const loadTime = Math.round(end - start);
                let msg = `‚ö° Resultado do Teste de Performance (M√°ximo):\n\n`;
                msg += `‚Ä¢ Tempo de resposta: ${loadTime}ms\n`;
                msg += `‚Ä¢ Status: ${loadTime < 100 ? 'üü¢ EXCELENTE' : loadTime < 300 ? 'üü° BOM' : 'üî¥ PODE MELHORAR'}\n`;
                msg += `‚Ä¢ Mem√≥ria: ${performance.memory ? formatBytes(performance.memory.usedJSHeapSize) : 'N/A'}\n`;
                msg += `‚Ä¢ Navegador: ${navigator.userAgent}\n`;
                msg += `‚Ä¢ Resolu√ß√£o: ${screen.width}x${screen.height}\n`;
                msg += `‚Ä¢ Idioma: ${navigator.language}\n`;
                msg += `‚Ä¢ Plataforma: ${navigator.platform}\n`;
                msg += `‚Ä¢ Online: ${navigator.onLine ? 'Sim' : 'N√£o'}\n`;
                msg += `‚Ä¢ Tempo desde o carregamento: ${Math.round(performance.now())} ms\n`;
                msg += `‚Ä¢ Quantidade de abas abertas (estimado): ${navigator.maxTouchPoints || 'N/A'}\n`;
                alert(msg);
            }, 80);
        }

        // Executar diagn√≥stico r√°pido ao carregar
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üß™ Central de Testes carregada com sucesso!');
            // Verificar se h√° dados salvos
            const savedData = localStorage.getItem('gerador_contratos_backup');
            if (savedData) {
                console.log('üíæ Dados salvos encontrados no LocalStorage');
            }
        });

        // Detectar erros globais
        window.addEventListener('error', function(e) {
            console.error('‚ùå Erro detectado:', e.message);
        });
    </script>
</body>
</html>